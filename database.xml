-- ---
-- Globals
-- ---

-- SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
-- SET FOREIGN_KEY_CHECKS=0;

-- ---
-- Table 'Goods'
-- 
-- ---

DROP TABLE IF EXISTS `Goods`;
		
CREATE TABLE `Goods` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `title` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Characteristics'
-- 
-- ---

DROP TABLE IF EXISTS `Characteristics`;
		
CREATE TABLE `Characteristics` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `title` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'GC_connection'
-- 
-- ---

DROP TABLE IF EXISTS `GC_connection`;
		
CREATE TABLE `GC_connection` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `goods_id` INTEGER NULL DEFAULT NULL,
  `char_id` INTEGER NULL DEFAULT NULL,
  `value` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Goods_exemplars'
-- 
-- ---

DROP TABLE IF EXISTS `Goods_exemplars`;
		
CREATE TABLE `Goods_exemplars` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `goods_id` INTEGER NULL DEFAULT NULL,
  `attribute_value_list` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Attribute'
-- 
-- ---

DROP TABLE IF EXISTS `Attribute`;
		
CREATE TABLE `Attribute` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `title` MEDIUMTEXT NULL DEFAULT NULL,
  `categ_id` INTEGER NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Storage'
-- 
-- ---

DROP TABLE IF EXISTS `Storage`;
		
CREATE TABLE `Storage` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `exemplar_id` INTEGER NULL DEFAULT NULL,
  `amount` INTEGER NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Prices'
-- 
-- ---

DROP TABLE IF EXISTS `Prices`;
		
CREATE TABLE `Prices` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `exemplar_id` INTEGER NULL DEFAULT NULL,
  `type` MEDIUMTEXT NULL DEFAULT NULL,
  `value` INTEGER NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Orders'
-- 
-- ---

DROP TABLE IF EXISTS `Orders`;
		
CREATE TABLE `Orders` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `type` MEDIUMTEXT NULL DEFAULT NULL,
  `contractor_id` INTEGER NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `confirmed` INTEGER NULL DEFAULT NULL,
  `comment` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Contractors'
-- 
-- ---

DROP TABLE IF EXISTS `Contractors`;
		
CREATE TABLE `Contractors` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `director` MEDIUMTEXT NULL DEFAULT NULL,
  `contact_person` MEDIUMTEXT NULL DEFAULT NULL,
  `contact_phone` MEDIUMTEXT NULL DEFAULT NULL,
  `comment` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Order_filling'
-- 
-- ---

DROP TABLE IF EXISTS `Order_filling`;
		
CREATE TABLE `Order_filling` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `order_id` INTEGER NULL DEFAULT NULL,
  `exemplar_id` INTEGER NULL DEFAULT NULL,
  `amount` INTEGER NULL DEFAULT NULL,
  `price` INTEGER NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Categories'
-- 
-- ---

DROP TABLE IF EXISTS `Categories`;
		
CREATE TABLE `Categories` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `parent_cat_id` INTEGER NULL DEFAULT NULL,
  `title` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'G_CAT_connection'
-- 
-- ---

DROP TABLE IF EXISTS `G_CAT_connection`;
		
CREATE TABLE `G_CAT_connection` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `categ_id` INTEGER NULL DEFAULT NULL,
  `goods_id` INTEGER NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Table 'Attribute_value'
-- 
-- ---

DROP TABLE IF EXISTS `Attribute_value`;
		
CREATE TABLE `Attribute_value` (
  `id` INTEGER NULL AUTO_INCREMENT DEFAULT NULL,
  `attribute_id` INTEGER NULL DEFAULT NULL,
  `value` MEDIUMTEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
);

-- ---
-- Foreign Keys 
-- ---

ALTER TABLE `GC_connection` ADD FOREIGN KEY (goods_id) REFERENCES `Goods` (`id`);
ALTER TABLE `GC_connection` ADD FOREIGN KEY (char_id) REFERENCES `Characteristics` (`id`);
ALTER TABLE `Goods_exemplars` ADD FOREIGN KEY (goods_id) REFERENCES `Goods` (`id`);
ALTER TABLE `Attribute` ADD FOREIGN KEY (categ_id) REFERENCES `Categories` (`id`);
ALTER TABLE `Storage` ADD FOREIGN KEY (exemplar_id) REFERENCES `Goods_exemplars` (`id`);
ALTER TABLE `Prices` ADD FOREIGN KEY (exemplar_id) REFERENCES `Goods_exemplars` (`id`);
ALTER TABLE `Orders` ADD FOREIGN KEY (contractor_id) REFERENCES `Contractors` (`id`);
ALTER TABLE `Order_filling` ADD FOREIGN KEY (order_id) REFERENCES `Orders` (`id`);
ALTER TABLE `Order_filling` ADD FOREIGN KEY (exemplar_id) REFERENCES `Goods_exemplars` (`id`);
ALTER TABLE `G_CAT_connection` ADD FOREIGN KEY (categ_id) REFERENCES `Categories` (`id`);
ALTER TABLE `G_CAT_connection` ADD FOREIGN KEY (goods_id) REFERENCES `Goods` (`id`);
ALTER TABLE `Attribute_value` ADD FOREIGN KEY (attribute_id) REFERENCES `Attribute` (`id`);

-- ---
-- Table Properties
-- ---

-- ALTER TABLE `Goods` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Characteristics` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `GC_connection` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Goods_exemplars` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Attribute` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Storage` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Prices` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Orders` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Contractors` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Order_filling` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Categories` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `G_CAT_connection` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
-- ALTER TABLE `Attribute_value` ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- ---
-- Test Data
-- ---

-- INSERT INTO `Goods` (`id`,`title`) VALUES
-- ('','');
-- INSERT INTO `Characteristics` (`id`,`title`) VALUES
-- ('','');
-- INSERT INTO `GC_connection` (`id`,`goods_id`,`char_id`,`value`) VALUES
-- ('','','','');
-- INSERT INTO `Goods_exemplars` (`id`,`goods_id`,`attribute_value_list`) VALUES
-- ('','','');
-- INSERT INTO `Attribute` (`id`,`title`,`categ_id`) VALUES
-- ('','','');
-- INSERT INTO `Storage` (`id`,`exemplar_id`,`amount`) VALUES
-- ('','','');
-- INSERT INTO `Prices` (`id`,`exemplar_id`,`type`,`value`) VALUES
-- ('','','','');
-- INSERT INTO `Orders` (`id`,`type`,`contractor_id`,`date`,`confirmed`,`comment`) VALUES
-- ('','','','','','');
-- INSERT INTO `Contractors` (`id`,`director`,`contact_person`,`contact_phone`,`comment`) VALUES
-- ('','','','','');
-- INSERT INTO `Order_filling` (`id`,`order_id`,`exemplar_id`,`amount`,`price`) VALUES
-- ('','','','','');
-- INSERT INTO `Categories` (`id`,`parent_cat_id`,`title`) VALUES
-- ('','','');
-- INSERT INTO `G_CAT_connection` (`id`,`categ_id`,`goods_id`) VALUES
-- ('','','');
-- INSERT INTO `Attribute_value` (`id`,`attribute_id`,`value`) VALUES
-- ('','','');

